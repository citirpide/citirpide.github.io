<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Buca √áƒ±tƒ±r Pide | Pide, Kebap, Lahmacun, Izgara ‚Äì Buca/ƒ∞zmir</title>

<!-- SEO -->
<meta name="description" content="Buca √áƒ±tƒ±r Pide: Pide, lahmacun, kebap, ƒ±zgara. WhatsApp sipari≈ü %10 indirim. Menderes, Erdem Cd. No:125 Buca/ƒ∞zmir." />
<meta name="theme-color" content="#0c1016" />
<link rel="canonical" href="https://example.com/" />

<!-- Icons -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet" />

<style>
  /* ===== Light, fast, premium palette ===== */
  :root{
    --bg:#0c1016;
    --surface:#0f141b;
    --surface-2:#0b1016;
    --text:#eef2f6;
    --muted:#b5bfcc;
    --gold:#e9d897;
    --gold-2:#c9a86b;
    --line:rgba(233,216,151,.28);
    --accent:#37c993;
    --danger:#ff6b6b;
    --overlay:rgba(6,8,12,.6);
    --panel:#0e131a;
  }

  *{box-sizing:border-box}
  html,body{
    margin:0;background:var(--bg);color:var(--text);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,'Noto Sans',sans-serif;
    scroll-behavior:smooth;
  }
  a{color:inherit;text-decoration:none}
  img{max-width:100%;display:block}
  body.lock-scroll{overflow:hidden;touch-action:none;}

  /* ===== Header ===== */
  header{
    position:sticky;top:0;z-index:1000;
    background:var(--surface-2);
    color:var(--gold);
    padding:18px 16px;
    text-align:center;font-weight:800;letter-spacing:.2px;
    border-bottom:1px solid rgba(255,255,255,.06);
  }
  header .title{font-size:1.75rem}
  header .subtitle{color:var(--muted);font-size:.95rem;margin-top:4px}

  main{padding:16px;max-width:1100px;margin:0 auto}

  /* ===== Top buttons ===== */
  .order-hub{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;padding:12px}
  .btn{
    display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;
    background:#151b23;color:#fff;font-weight:800;border:1px solid rgba(255,255,255,.08)
  }
  .btn.secondary{background:#121820;color:var(--text);border:1px solid var(--line)}

  /* ===== Category cards ===== */
  .cat{
    background:var(--surface);border-radius:14px;margin:14px 0;
    border:1px solid rgba(255,255,255,.08);
    contain:content;
  }
  .cat h2{
    margin:0;display:flex;align-items:center;gap:10px;padding:14px 14px;cursor:pointer;
    background:var(--surface-2);
    border-left:6px solid var(--gold);
  }
  .cat h2 .chev{margin-left:auto}
  .cat .content{
    max-height:0;opacity:0;overflow:hidden;transition:max-height .35s ease,opacity .3s ease,padding .3s ease;
    content-visibility:auto; contain-intrinsic-size:1px 400px;
  }
  .cat.open .content{max-height:2400px;opacity:1;padding:6px 0}

  /* ===== Items ===== */
  .item{
    display:flex;align-items:center;justify-content:space-between;gap:10px;
    padding:10px 14px;border-bottom:1px dashed var(--line);font-size:1rem;
  }
  .item:last-child{border-bottom:none}
  .item .name{display:flex;align-items:center;gap:8px;min-width:0}
  .item .price{font-variant-numeric:tabular-nums;color:var(--gold-2);font-weight:900}

  .right-box{display:flex;align-items:center;gap:10px;flex-shrink:0}

  .add-btn{
    padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,.1);
    background:#161c25;color:#fff;font-weight:800;cursor:pointer;display:inline-flex;align-items:center;gap:8px;
  }
  .add-btn i{color:var(--accent)}

  /* ===== Section titles ===== */
  .section-title{margin:20px 0 8px;font-weight:900;letter-spacing:.3px;color:var(--gold)}
  .divider{height:1px;background:linear-gradient(90deg,transparent,var(--line),transparent);margin:6px 0 12px}

  /* ===== Cards ===== */
  .grid{display:grid;gap:12px}
  @media(min-width:720px){.grid{grid-template-columns:1.1fr .9fr}}
  .card{background:var(--surface);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px}

  /* ===== Footer ===== */
  footer{margin-top:20px;background:var(--surface-2);border-top:1px solid rgba(255,255,255,.08);padding:14px}
  .note{color:var(--muted);font-size:.95rem;text-align:center}

  /* ===== Dock ===== */
  .dock{position:fixed;left:0;right:0;bottom:12px;z-index:1000;display:flex;gap:10px;justify-content:center;pointer-events:none;}
  .dock .dock-inner{
    display:flex;background:#101620;border:1px solid rgba(255,255,255,.08);
    border-radius:14px;overflow:hidden;pointer-events:auto
  }
  .dock .dock-btn{display:flex;align-items:center;gap:8px;padding:10px 12px;color:var(--text);font-weight:800;border-right:1px solid rgba(255,255,255,.08)}
  .dock .dock-btn:last-child{border-right:none}

  /* ===== Cart Overlay/Sheet ===== */
  .cart-overlay[hidden]{display:none;}
  .cart-overlay{position:fixed; inset:0; background:var(--overlay); display:flex; align-items:flex-end; justify-content:center; z-index:1200;}
  .cart-sheet{
    width:min(720px,100vw); height:min(92dvh, 820px); max-height:92dvh;
    background:var(--surface-2);
    border:1px solid rgba(255,255,255,.08); border-radius:16px 16px 0 0; overflow:hidden; display:flex; flex-direction:column;
  }
  @supports not (height: 1dvh){ .cart-sheet{ height:92vh; max-height:92vh; } }
  @media (min-width:900px){ .cart-overlay{align-items:center;} .cart-sheet{border-radius:16px; height:72vh; max-height:72vh;} }
  .cart-header{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;background:#0f141b;border-bottom:1px solid rgba(255,255,255,.08)}
  .cart-header h4{margin:0;font-size:1.05rem;color:var(--gold)}
  .close-x{background:none;border:none;color:#e7ecf2;font-size:1.15rem;cursor:pointer}

  .cart-body{flex:1;overflow:auto;-webkit-overflow-scrolling:touch;padding-bottom:4px;}
  .cart-empty{padding:16px;text-align:center;color:var(--muted)}
  .cart-item{display:grid;grid-template-columns:1fr auto auto;gap:10px;align-items:center;padding:12px 14px;border-bottom:1px dashed var(--line)}
  .qty{display:inline-flex;align-items:center;gap:8px;border:1px solid rgba(255,255,255,.1);border-radius:10px;padding:4px 8px;background:#121823}
  .qty button{background:none;border:none;color:#f0f4f8;font-weight:900;cursor:pointer;font-size:1rem;width:22px;height:22px;line-height:22px}
  .remove{color:var(--danger);cursor:pointer}

  .totals{padding:12px 14px;background:#0f141b;border-top:1px solid rgba(255,255,255,.08)}
  .totals .row{display:flex;justify-content:space-between;margin:6px 0}
  .form{padding:12px 14px;border-top:1px solid rgba(255,255,255,.08);display:grid;gap:8px}
  .form input,.form textarea{width:100%;background:#0b1016;border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:10px 12px;color:#eef2f6;font-size:.95rem}
  .form textarea{min-height:70px;resize:vertical}
  .pay{display:flex;gap:14px;align-items:center;margin-top:4px;color:#d7dde8;font-size:.95rem}
  .order-btn{
    margin:10px 14px 14px 14px;width:calc(100% - 28px);padding:12px 14px;border-radius:12px;
    border:1px solid rgba(255,255,255,.08); background:#25D366; color:#0a0a0a; font-weight:900; cursor:pointer;
  }

  .strike{color:#96a3b4;text-decoration:line-through}
  .disc{color:var(--accent);font-weight:900}

  /* ===== Admin Modal ===== */
  .admin-overlay[hidden]{display:none;}
  .admin-overlay{
    position:fixed; inset:0; background:rgba(0,0,0,.65);
    display:flex; align-items:center; justify-content:center; z-index:1400;
  }
  .admin-panel{
    width:min(960px,96vw); max-height:92vh; overflow:auto;
    background:var(--panel); border:1px solid rgba(255,255,255,.1); border-radius:14px; padding:16px;
  }
  .admin-panel h3{margin:0 0 10px; color:var(--gold)}
  .admin-row{display:grid; grid-template-columns:1fr 120px 80px; gap:8px; align-items:center; margin-bottom:8px}
  .admin-row input{width:100%; background:#0b1016; border:1px solid rgba(255,255,255,.12); border-radius:8px; padding:8px 10px; color:#fff}
  .admin-actions{display:flex; gap:8px; flex-wrap:wrap; margin:10px 0}
  .a-btn{background:#16202c; color:#fff; border:1px solid rgba(255,255,255,.12); border-radius:10px; padding:8px 10px; cursor:pointer; font-weight:800}
  .a-btn.danger{background:#2a1618; border-color:#632a2f; color:#ffb3b3}
  .admin-cat{border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:12px; margin:10px 0; background:#0d131b}
  .admin-cat h4{margin:0 0 8px}
  .admin-cat .mini-actions{display:flex; gap:8px; flex-wrap:wrap; margin:6px 0 10px}
  .admin-footer{display:flex; justify-content:space-between; align-items:center; gap:8px; margin-top:10px}
  .admin-note{color:#b9c3d1; font-size:.9rem}
  .admin-close{background:none; border:none; color:#fff; font-size:1.1rem; cursor:pointer}
</style>
</head>
<body>

<header id="siteHeader">
  <div class="title">üçΩÔ∏è Buca √áƒ±tƒ±r Pide</div>
  <div class="subtitle">Sƒ±cak ‚Äì Taze ‚Äì Hƒ±zlƒ± Teslimat ‚Ä¢ Buca / ƒ∞zmir</div>
</header>

<main>

  <!-- Quick actions -->
  <div class="order-hub" id="orderHub">
    <a class="btn" href="tel:+902324424555"><i class="fa-solid fa-phone"></i> Tek Tƒ±kla Ara</a>
    <a class="btn secondary" href="https://yemek.go.link/2hf3u" target="_blank" rel="noopener"><i class="fa-solid fa-bowl-food"></i> Yemeksepeti</a>
    <a class="btn secondary" href="https://getir.com/yemek/restoran/buca-citir-pide-buca-izmir/" target="_blank" rel="noopener"><i class="fa-solid fa-bolt"></i> Getir</a>
    <a class="btn secondary" href="https://tgoyemek.com/restoranlar/230624" target="_blank" rel="noopener"><i class="fa-solid fa-box-open"></i> Trendyol</a>
  </div>

  <!-- MENU -->
  <h3 class="section-title">Men√º</h3>
  <div class="divider"></div>

  <!-- Dinamik men√º burada √ºretilecek -->
  <div id="menuRoot">
    <!-- ===== Statik ba≈ülangƒ±√ß: localStorage yoksa bu i√ßerik kullanƒ±lƒ±r ===== -->

    <!-- Pide √áe≈üitleri -->
    <section class="cat open">
      <h2><i class="fa-solid fa-pizza-slice"></i> Pide √áe≈üitleri <i class="fa-solid fa-chevron-right chev"></i></h2>
      <div class="content">
        <div class="item"><span class="name">Kƒ±ymalƒ± Sade</span><span class="price">175,00‚Ç∫</span></div>
        <div class="item"><span class="name">Kƒ±ymalƒ± Yumurtalƒ±</span><span class="price">175,00‚Ç∫</span></div>
        <div class="item"><span class="name">Kƒ±ymalƒ± Ka≈üarlƒ±</span><span class="price">200,00‚Ç∫</span></div>
        <div class="item"><span class="name">Ka≈üarlƒ± Sade</span><span class="price">180,00‚Ç∫</span></div>
        <div class="item"><span class="name">Ka≈üarlƒ± Yumurtalƒ±</span><span class="price">180,00‚Ç∫</span></div>
        <div class="item"><span class="name">Vejetaryen (Ka≈üar, Domates, Ye≈üil Biber, Mantar)</span><span class="price">150,00‚Ç∫</span></div>
        <div class="item"><span class="name">Ku≈üba≈üƒ±lƒ± Sade</span><span class="price">200,00‚Ç∫</span></div>
        <div class="item"><span class="name">Ku≈üba≈üƒ±lƒ± Ka≈üarlƒ±</span><span class="price">225,00‚Ç∫</span></div>
        <div class="item"><span class="name">Ku≈üba≈üƒ±lƒ± Ka≈üarlƒ± Mantarlƒ±</span><span class="price">235,00‚Ç∫</span></div>
        <div class="item"><span class="name">Tahinli Pide</span><span class="price">200,00‚Ç∫</span></div>
      </div>
    </section>
    
    <!-- Lahmacun √áe≈üitleri -->
    <section class="cat">
      <h2><i class="fa-solid fa-bread-slice"></i> Lahmacun √áe≈üitleri <i class="fa-solid fa-chevron-right chev"></i></h2>
      <div class="content">
        <div class="item"><span class="name">Lahmacun</span><span class="price">125,00‚Ç∫</span></div>
        <div class="item"><span class="name">Lahmacun (Kƒ±ymalƒ±, Ka≈üarlƒ±)</span><span class="price">150,00‚Ç∫</span></div>
        <div class="item"><span class="name">Lahmacun (Kƒ±ymalƒ±, Ka≈üarlƒ±, Mantarlƒ±)</span><span class="price">160,00‚Ç∫</span></div>
      </div>
    </section>

    <!-- Kebaplar -->
    <section class="cat">
      <h2><i class="fa-solid fa-fire-burner"></i> Kebaplar <i class="fa-solid fa-chevron-right chev"></i></h2>
      <div class="content">
        <div class="item"><span class="name">Adana Kebap</span><span class="price">250,00‚Ç∫</span></div>
        <div class="item"><span class="name">Urfa Kebap</span><span class="price">250,00‚Ç∫</span></div>
        <div class="item"><span class="name">Izgara K√∂fte</span><span class="price">250,00‚Ç∫</span></div>
        <div class="item"><span class="name">Tavuk Izgara</span><span class="price">250,00‚Ç∫</span></div>
      </div>
    </section>
    
    <!-- D√ºr√ºmler -->
    <section class="cat">
      <h2>üåØ D√ºr√ºmler <i class="fa-solid fa-chevron-right chev"></i></h2>
      <div class="content">
        <div class="item"><span class="name">Adana D√ºr√ºm</span><span class="price">150,00‚Ç∫</span></div>
        <div class="item"><span class="name">Urfa D√ºr√ºm</span><span class="price">150,00‚Ç∫</span></div>  
        <div class="item"><span class="name">Izgara K√∂fte D√ºr√ºm</span><span class="price">150,00‚Ç∫</span></div>
        <div class="item"><span class="name">Tavuk Izgara D√ºr√ºm</span><span class="price">150,00‚Ç∫</span></div>   
        <div class="item"><span class="name">Lahmacun D√ºr√ºm</span><span class="price">125,00‚Ç∫</span></div>
      </div>
    </section>
    
    <!-- Kiremitte √áe≈üitleri -->
    <section class="cat">
      <h2><i class="fa-solid fa-bowl-food"></i> Kiremitte √áe≈üitleri <i class="fa-solid fa-chevron-right chev"></i></h2>
      <div class="content">
        <div class="item"><span class="name">Kiremitte Tavuk</span><span class="price">250,00‚Ç∫</span></div>
        <div class="item"><span class="name">Kiremitte Tavuk Ka≈üarlƒ±</span><span class="price">270,00‚Ç∫</span></div>
        <div class="item"><span class="name">Kiremitte Tavuk Ka≈üarlƒ± Mantarlƒ±</span><span class="price">280,00‚Ç∫</span></div>
        <div class="item"><span class="name">Kiremitte K√∂fte</span><span class="price">250,00‚Ç∫</span></div>
        <div class="item"><span class="name">Kiremitte K√∂fte Ka≈üarlƒ±</span><span class="price">270,00‚Ç∫</span></div>
        <div class="item"><span class="name">Kiremitte K√∂fte Ka≈üarlƒ± Mantarlƒ±</span><span class="price">280,00‚Ç∫</span></div>
      </div>
    </section>

    <!-- Kampanyalƒ± Men√ºler -->
    <section class="cat">
      <h2>üéâ Kampanyalƒ± Men√ºler <i class="fa-solid fa-chevron-right chev"></i></h2>
      <div class="content">
        <div class="item">
          <span class="name">2'li Lahmacun Men√º</span>
          <span class="price">224,00‚Ç∫ <del class="muted" style="margin-left:6px;color:#9aa6bb">280,00‚Ç∫</del></span>
          <div class="desc" style="color:#c8d0dc">2 Adet Lahmacun + Salata + Haydari + √áiƒü K√∂fte</div>
        </div>
        <div class="item">
          <span class="name">2'li Kƒ±ymalƒ± Ka≈üarlƒ± Pide Men√º</span>
          <span class="price">360,00‚Ç∫ <del class="muted" style="margin-left:6px;color:#9aa6bb">450,00‚Ç∫</del></span>
          <div class="desc" style="color:#c8d0dc">2 Adet Kƒ±ymalƒ± Ka≈üarlƒ± Pide + Mevsim Salata + Haydari + √áiƒü K√∂fte</div>
        </div>
        <div class="item">
          <span class="name">2'li Kƒ±ymalƒ± Pide Men√º</span>
          <span class="price">320,00‚Ç∫ <del class="muted" style="margin-left:6px;color:#9aa6bb">400,00‚Ç∫</del></span>
          <div class="desc" style="color:#c8d0dc">2 Adet Kƒ±ymalƒ± Pide + Salata + Haydari + √áiƒü K√∂fte</div>
        </div>
      </div>
    </section>

    <!-- ƒ∞√ßecekler -->
    <section class="cat">
      <h2><i class="fa-solid fa-mug-saucer"></i> ƒ∞√ßecekler <i class="fa-solid fa-chevron-right chev"></i></h2>
      <div class="content">
        <div class="item"><span class="name">Kola</span><span class="price">50,00‚Ç∫</span></div>
        <div class="item"><span class="name">Light - Zero</span><span class="price">50,00‚Ç∫</span></div>
        <div class="item"><span class="name">Fanta</span><span class="price">50,00‚Ç∫</span></div>
        <div class="item"><span class="name">Sprite</span><span class="price">50,00‚Ç∫</span></div>
        <div class="item"><span class="name">Niƒüde Gazozu</span><span class="price">40,00‚Ç∫</span></div>
        <div class="item"><span class="name">1 lt Kola</span><span class="price">80,00‚Ç∫</span></div>
        <div class="item"><span class="name">≈ûalgam Suyu</span><span class="price">50,00‚Ç∫</span></div>
        <div class="item"><span class="name">B√ºy√ºk Ayran</span><span class="price">35,00‚Ç∫</span></div>
        <div class="item"><span class="name">K√º√ß√ºk Ayran</span><span class="price">25,00‚Ç∫</span></div>
        <div class="item"><span class="name">Soda</span><span class="price">30,00‚Ç∫</span></div>
        <div class="item"><span class="name">Su</span><span class="price">15,00‚Ç∫</span></div>
      </div>
    </section>

    <!-- ===== Statik biti≈ü ===== -->
  </div>

  <!-- Bilgiler -->
  <h3 class="section-title">Bilgiler</h3>
  <div class="divider"></div>

  <div class="grid">
    <div class="card">
      <h4 style="margin:0 0 8px;color:var(--gold)">√áalƒ±≈üma Saatleri</h4>
      <div class="item" style="border:none;padding:8px 0">
        <div><strong>Pazartesi ‚Äì Pazar (√ßar≈üamba g√ºnleri kapalƒ±yƒ±z)</strong></div>
        <div class="muted">12:00 ‚Äì 23:00</div>
      </div>
    </div>

    <div class="card">
      <h4 style="margin:0 0 8px;color:var(--gold)">ƒ∞leti≈üim</h4>
      <p style="margin:6px 0"><i class="fa-solid fa-phone"></i> <a href="tel:+902324424555">+90 (0232) 442 45 55</a></p>
      <p style="margin:6px 0"><i class="fa-solid fa-location-dot"></i> Menderes, Erdem Cd. No:125 Buca/ƒ∞zmir</p>
      <p class="muted" style="margin:10px 0 0"><i class="fa-solid fa-circle-info"></i> 200‚Ç∫ altƒ± sipari≈ülerde adrese g√∂nderim yapƒ±lmƒ±yor.</p>
    </div>
  </div>

  <!-- Harita: tƒ±klayƒ±nca y√ºkle -->
  <div class="card" style="margin-top:14px;padding:10px;overflow:hidden">
    <button id="showMap" class="add-btn" style="width:100%;justify-content:center">
      <i class="fa-solid fa-map-location-dot"></i> Haritayƒ± G√∂ster
    </button>
    <div id="mapHolder" style="margin-top:10px"></div>
  </div>

  <footer>
    <p class="note">En iyi malzemelerle hazƒ±rlanmƒ±≈ü, sƒ±cak ve taze √ºr√ºnler sunar; m√º≈üterilerimize hƒ±zlƒ± ve g√ºler y√ºzl√º hizmet veririz.</p>
  </footer>
</main>

<!-- Dock -->
<nav class="dock" aria-label="Hƒ±zlƒ± ƒ∞≈ülemler">
  <div class="dock-inner">
    <a class="dock-btn" href="tel:+902324424555"><i class="fa-solid fa-phone"></i> Ara</a>
    <a class="dock-btn" href="javascript:void(0)" id="openCart"><i class="fa-solid fa-basket-shopping"></i> <span id="cartBadge">Sepet (0) ‚Äî 0,00‚Ç∫</span></a>
  </div>
</nav>

<!-- CART OVERLAY/SHEET -->
<div class="cart-overlay" id="cartOverlay" hidden>
  <div class="cart-sheet" role="dialog" aria-modal="true" aria-labelledby="cartTitle" id="cartSheet" onclick="event.stopPropagation()">
    <div class="cart-header">
      <h4 id="cartTitle">üßæ Sepetiniz</h4>
      <button class="close-x" id="closeCart" title="Kapat"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <div class="cart-body" id="cartItems"></div>
    <div class="totals">
      <div class="row"><span>Ara Toplam</span><strong id="subTotal">0,00‚Ç∫</strong></div>
      <div class="row"><span>WhatsApp ƒ∞ndirimi (%10)</span><strong id="discount">-0,00‚Ç∫</strong></div>
      <div class="row" style="font-weight:900;color:var(--gold)"><span>√ñdenecek</span><strong id="grandTotal">0,00‚Ç∫</strong></div>
      <div class="row muted-mini"><span>Not:</span><span>WhatsApp sipari≈ülerine %10 indirim uygulanƒ±r.</span></div>
    </div>
    <div class="form">
      <input id="custName" placeholder="Ad Soyad" autocomplete="name"/>
      <textarea id="custAddress" placeholder="Adres (Mahalle/Cadde, No, Kat, Daire)"></textarea>
      <textarea id="custNote" placeholder="Sipari≈ü notu (isteƒüe baƒülƒ±)"></textarea>
      <div class="pay">
        <span>√ñdeme:</span>
        <label><input type="radio" name="pay" value="Nakit" checked> Nakit</label>
        <label><input type="radio" name="pay" value="Kart"> Kart</label>
      </div>
    </div>
    <button class="order-btn" id="sendWhatsapp"><i class="fa-brands fa-whatsapp"></i> WhatsApp‚Äôtan G√∂nder</button>
  </div>
</div>

<!-- ADMIN OVERLAY -->
<div class="admin-overlay" id="adminOverlay" hidden>
  <div class="admin-panel" role="dialog" aria-modal="true" aria-labelledby="adminTitle">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:8px">
      <h3 id="adminTitle">üîß Y√∂netici Paneli</h3>
      <button class="admin-close" id="closeAdmin" title="Kapat"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <div class="admin-actions">
      <button class="a-btn" id="addCategory"><i class="fa-solid fa-folder-plus"></i> Kategori Ekle</button>
      <button class="a-btn" id="exportMenu"><i class="fa-solid fa-file-export"></i> Dƒ±≈üa Aktar (JSON)</button>
      <label class="a-btn" for="importFile" style="cursor:pointer"><i class="fa-solid fa-file-import"></i> ƒ∞√ße Aktar (JSON)</label>
      <input type="file" id="importFile" accept="application/json" style="display:none">
      <button class="a-btn danger" id="resetMenu"><i class="fa-solid fa-rotate-left"></i> Varsayƒ±lanƒ± Y√ºkle</button>
    </div>
    <div id="adminContent"></div>
    <div class="admin-footer">
      <span class="admin-note">Deƒüi≈üiklikler kaydedildiƒüinde men√º yeniden √ßizilir ve tarayƒ±cƒ±da saklanƒ±r.</span>
      <div style="display:flex; gap:8px">
        <button class="a-btn" id="saveAdmin"><i class="fa-solid fa-floppy-disk"></i> Kaydet</button>
      </div>
    </div>
  </div>
</div>

<script>
  /* ===== CONFIG ===== */
  const WHATSAPP_TO = "905517112064";
  const CURRENCY = "‚Ç∫";
  const DISCOUNT_RATE = 0.10;

  /* ===== Helpers ===== */
  function parsePrice(text){
    // "1.234,50‚Ç∫" -> 1234.50
    const m = String(text).match(/(\d{1,3}(?:\.\d{3})*|\d+),(\d{2})/);
    if(!m) return 0;
    return parseFloat(m[0].replace(/\./g,'').replace(',','.'));
  }
  function formatTL(n){
    try{ return n.toLocaleString('tr-TR',{minimumFractionDigits:2,maximumFractionDigits:2})+CURRENCY; }
    catch(e){ return (Math.round(n*100)/100).toFixed(2).replace('.',',')+CURRENCY; }
  }

  /* ===== CART STATE ===== */
  const openCartBtn = document.getElementById('openCart');
  const closeCartBtn = document.getElementById('closeCart');
  const cartOverlay = document.getElementById('cartOverlay');
  const cartItemsEl = document.getElementById('cartItems');
  const subTotalEl = document.getElementById('subTotal');
  const discountEl = document.getElementById('discount');
  const grandTotalEl = document.getElementById('grandTotal');
  const cartBadge = document.getElementById('cartBadge');

  const nameEl = document.getElementById('custName');
  const addrEl = document.getElementById('custAddress');
  const noteEl = document.getElementById('custNote');
  const sendBtn = document.getElementById('sendWhatsapp');

  let cart = [];
  const LS_CART = "buca-citir-cart";
  const LS_MENU = "buca-citir-menu-v1";

  function loadCart(){
    try{ cart = JSON.parse(localStorage.getItem(LS_CART)) || []; } catch(e){ cart = []; }
    renderCart();
  }
  function saveCart(){ localStorage.setItem(LS_CART, JSON.stringify(cart)); }

  function cartTotals(){
    const sub = cart.reduce((s,i)=> s + i.price*i.qty, 0);
    const disc = sub*DISCOUNT_RATE;
    const grand = Math.max(0, sub-disc);
    const count = cart.reduce((s,i)=> s + i.qty, 0);
    return {sub, disc, grand, count};
  }

  function renderCart(){
    if(cart.length===0){
      cartItemsEl.innerHTML = '<div class="cart-empty">Sepetiniz bo≈ü. Men√ºlerden √ºr√ºn ekleyin.</div>';
    }else{
      cartItemsEl.innerHTML = cart.map((i,idx)=>{
        const unitDisc = i.price*(1-DISCOUNT_RATE);
        return `
          <div class="cart-item">
            <div>
              <strong>${i.name}</strong>
              <div class="muted-mini">
                <span class="strike">${formatTL(i.price)}</span>
                &nbsp;‚Üí&nbsp;<span class="disc">${formatTL(unitDisc)}</span> / adet
              </div>
            </div>
            <div class="qty" aria-label="Adet">
              <button aria-label="Azalt" onclick="decItem(${idx})">‚àí</button>
              <span><strong>${i.qty}</strong></span>
              <button aria-label="Arttƒ±r" onclick="incItem(${idx})">Ôºã</button>
            </div>
            <div>
              <strong>${formatTL(unitDisc*i.qty)}</strong>
              <div class="remove" title="Kaldƒ±r" onclick="removeItem(${idx})"><i class="fa-solid fa-trash-can"></i></div>
            </div>
          </div>
        `;
      }).join('');
    }
    const {sub, disc, grand, count} = cartTotals();
    subTotalEl.textContent = formatTL(sub);
    discountEl.textContent = '-' + formatTL(disc);
    grandTotalEl.textContent = formatTL(grand);
    cartBadge.textContent = `Sepet (${count}) ‚Äî ${formatTL(grand)}`;
  }

  function saveAndRender(){ saveCart(); renderCart(); }
  window.incItem = (i)=>{ cart[i].qty++; saveAndRender(); }
  window.decItem = (i)=>{ cart[i].qty = Math.max(1, cart[i].qty-1); saveAndRender(); }
  window.removeItem = (i)=>{ cart.splice(i,1); saveAndRender(); }

  function openCart(){ cartOverlay.hidden=false; document.body.classList.add('lock-scroll'); }
  function closeCart(){ cartOverlay.hidden=true; document.body.classList.remove('lock-scroll'); }
  openCartBtn.addEventListener('click', (e)=>{ e.preventDefault(); openCart(); }, {passive:true});
  closeCartBtn.addEventListener('click', closeCart, {passive:true});
  cartOverlay.addEventListener('click', closeCart, {passive:true});
  document.addEventListener('keydown',e=>{ if(e.key==='Escape') closeCart(); });

  function selectedPayment(){
    const el = document.querySelector('input[name="pay"]:checked');
    return el ? el.value : 'Nakit';
  }

  function iconForItem(name){
    const n = name.toLowerCase();
    if(n.includes('d√ºr√ºm')) return 'üåØ';
    if(n.includes('lahmacun') || n.includes('pide')) return 'ü´ì';
    if(n.includes('kebap') || n.includes('k√∂fte') || n.includes('tavuk')) return 'üçñ';
    if(n.includes('ayran') || n.includes('kola') || n.includes('fanta') || n.includes('sprite') || n.includes('soda') || n.includes('gazoz') || n.includes('su') || n.includes('≈üalgam')) return 'ü•§';
    return 'üçΩÔ∏è';
  }

  function buildMessage(){
    const {sub, disc, grand} = cartTotals();
    const lines = [];
    lines.push("üßæ Buca √áƒ±tƒ±r Pide - Online Sipari≈ü");
    lines.push("================================");
    if(cart.length){
      lines.push("üõí √úr√ºnler:");
      cart.forEach(i=>{
        const unitDisc = i.price*(1-DISCOUNT_RATE);
        const icon = iconForItem(i.name);
        lines.push(`‚Ä¢ ${icon} ${i.name} x ${i.qty} = ${formatTL(i.price*i.qty)} ‚Üí ${formatTL(unitDisc*i.qty)}`);
      });
      lines.push("--------------------------------");
      lines.push(`üíµ Ara Toplam: ${formatTL(sub)}`);
      lines.push(`üéÅ WhatsApp ƒ∞ndirimi (%10): -${formatTL(disc)}`);
      lines.push(`‚úÖ √ñdenecek: ${formatTL(grand)}`);
      lines.push("‚ÑπÔ∏è WhatsApp ile verilen sipari≈ülerde %10 indirim uygulanmƒ±≈ütƒ±r.");
    }else{
      lines.push("(Sepet bo≈ü)");
    }
    lines.push("");
    lines.push(`üë§ Ad Soyad: ${nameEl.value || "-"}`);
    lines.push(`üìç Adres: ${addrEl.value || "-"}`);
    if(noteEl.value.trim()) lines.push(`‚úçÔ∏è Not: ${noteEl.value.trim()}`);
    lines.push(`üí≥ √ñdeme Y√∂ntemi: ${selectedPayment()}`);
    lines.push("");
    lines.push("üöö M√ºmk√ºnse konum payla≈üabilir misiniz?");
    return lines.join("\n");
  }

  function sendToWhatsapp(){
    if(!cart.length){ alert("Sepetiniz bo≈ü. L√ºtfen √ºr√ºn ekleyin."); return; }
    if(!nameEl.value.trim() || !addrEl.value.trim()){ alert("L√ºtfen ad soyad ve adres bilgilerini doldurun."); return; }
    const url = `https://wa.me/${WHATSAPP_TO}?text=${encodeURIComponent(buildMessage())}`;
    window.open(url, "_blank");
  }
  document.getElementById('sendWhatsapp').addEventListener('click', sendToWhatsapp, {passive:true});

  /* ===== Add to cart ===== */
  function addToCart(name, price){
    const idx = cart.findIndex(i=>i.name===name && i.price===price);
    if(idx>-1) cart[idx].qty += 1;
    else cart.push({name, price, qty:1});
    try{ if(navigator.vibrate) navigator.vibrate(10); }catch(e){}
    saveAndRender();
  }

  function enhanceMenu(){
    document.querySelectorAll('#menuRoot section.cat .content .item').forEach((row)=>{
      const nameEl = row.querySelector('.name');
      const priceEl = row.querySelector('.price');
      if(!nameEl || !priceEl) return;
      if(row.querySelector('.add-btn')) return;

      const name = nameEl.textContent.trim();
      const price = parsePrice(priceEl.textContent.trim());

      const right = document.createElement('div');
      right.className = 'right-box';
      right.appendChild(priceEl);

      const btn = document.createElement('button');
      btn.className = 'add-btn';
      btn.type = 'button';
      btn.innerHTML = `<i class="fa-solid fa-circle-plus"></i> Sepete Ekle`;
      btn.addEventListener('click', ()=> addToCart(name, price), {passive:true});
      right.appendChild(btn);

      row.appendChild(right);
    });

    // Kategori a√ß/kapa
    document.querySelectorAll('#menuRoot .cat h2').forEach(h=>{
      if(!h.dataset.bound){
        h.addEventListener('click',()=> h.parentElement.classList.toggle('open'), {passive:true});
        h.dataset.bound = '1';
      }
    });
  }

  /* ===== MENU DATA: read, render, persist ===== */
  function readMenuFromDOM(){
    const root = document.getElementById('menuRoot');
    const sections = Array.from(root.querySelectorAll(':scope > section.cat'));
    const data = sections.map(sec=>{
      const title = sec.querySelector('h2')?.childNodes[1]?.textContent?.trim() || sec.querySelector('h2')?.textContent?.replace(/\s*<.*$/,'').trim();
      const items = Array.from(sec.querySelectorAll('.content .item')).map(row=>{
        const name = row.querySelector('.name')?.textContent?.trim() || '';
        const price = parsePrice(row.querySelector('.price')?.textContent?.trim() || '0,00');
        return { name, price };
      }).filter(i=>i.name);
      return { title, items };
    });
    return data.filter(c=>c.title && c.items.length);
  }

  function renderMenuFromData(menuData){
    const root = document.getElementById('menuRoot');
    root.innerHTML = menuData.map((cat,idx)=>{
      const itemsHTML = cat.items.map(it=>`
        <div class="item">
          <span class="name">${it.name}</span>
          <span class="price">${formatTL(it.price)}</span>
        </div>
      `).join('');
      return `
        <section class="cat ${idx===0?'open':''}">
          <h2>${iconForCategory(cat.title)} ${cat.title} <i class="fa-solid fa-chevron-right chev"></i></h2>
          <div class="content">${itemsHTML}</div>
        </section>
      `;
    }).join('');
    enhanceMenu();
  }

  function iconForCategory(title){
    const t = (title||'').toLowerCase();
    if(t.includes('pide')) return '<i class="fa-solid fa-pizza-slice"></i>';
    if(t.includes('lahmacun')) return '<i class="fa-solid fa-bread-slice"></i>';
    if(t.includes('kebap') || t.includes('ƒ±zgara')) return '<i class="fa-solid fa-fire-burner"></i>';
    if(t.includes('kiremit')) return '<i class="fa-solid fa-bowl-food"></i>';
    if(t.includes('i√ßecek')) return '<i class="fa-solid fa-mug-saucer"></i>';
    if(t.includes('d√ºr√ºm')) return 'üåØ';
    if(t.includes('kampanya')) return 'üéâ';
    return 'üçΩÔ∏è';
  }

  function loadMenu(){
    const raw = localStorage.getItem(LS_MENU);
    if(raw){
      try{
        const data = JSON.parse(raw);
        if(Array.isArray(data) && data.length){
          renderMenuFromData(data);
          return;
        }
      }catch(e){}
    }
    // LocalStorage yoksa: mevcut statik DOM'u enhance et
    enhanceMenu();
  }

  /* ===== ADMIN PANEL ===== */
  const adminOverlay = document.getElementById('adminOverlay');
  const adminContent = document.getElementById('adminContent');
  const closeAdminBtn = document.getElementById('closeAdmin');

  function openAdmin(){
    const data = getMenuData();
    buildAdminUI(data);
    adminOverlay.hidden = false;
    document.body.classList.add('lock-scroll');
  }
  function closeAdmin(){
    adminOverlay.hidden = true;
    document.body.classList.remove('lock-scroll');
  }

  closeAdminBtn.addEventListener('click', closeAdmin, {passive:true});
  adminOverlay.addEventListener('click', (e)=>{ if(e.target===adminOverlay) closeAdmin(); }, {passive:true});
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && !adminOverlay.hidden) closeAdmin(); });

  // Alt+P kƒ±sayolu ve ≈üifre
  document.addEventListener('keydown', (e)=>{
    if(e.altKey && e.key.toLowerCase()==='p'){
      e.preventDefault();
      const pass = prompt('Y√∂netici ≈üifresini girin:');
      if(pass === 'feritefe213'){ openAdmin(); }
      else if(pass!==null){ alert('Hatalƒ± ≈üifre'); }
    }
  });

  function getMenuData(){
    const raw = localStorage.getItem(LS_MENU);
    if(raw){
      try{ const data = JSON.parse(raw); if(Array.isArray(data)&&data.length) return data; }catch(e){}
    }
    return readMenuFromDOM();
  }

  function buildAdminUI(menu){
    adminContent.innerHTML = '';
    menu.forEach((cat, ci)=>{
      const wrap = document.createElement('div');
      wrap.className = 'admin-cat';
      wrap.innerHTML = `
        <h4>${iconForCategory(cat.title)} ${cat.title}</h4>
        <div class="mini-actions">
          <button class="a-btn" data-act="addItem" data-ci="${ci}"><i class="fa-solid fa-plus"></i> √úr√ºn Ekle</button>
          <button class="a-btn danger" data-act="delCat" data-ci="${ci}"><i class="fa-solid fa-trash"></i> Kategoriyi Sil</button>
          <button class="a-btn" data-act="renameCat" data-ci="${ci}"><i class="fa-solid fa-pen"></i> Adƒ±nƒ± Deƒüi≈ütir</button>
        </div>
        <div class="cat-items" data-ci="${ci}"></div>
      `;
      adminContent.appendChild(wrap);

      const itemsBox = wrap.querySelector('.cat-items');
      cat.items.forEach((it, ii)=>{
        const row = document.createElement('div');
        row.className = 'admin-row';
        row.dataset.ci = ci;
        row.dataset.ii = ii;
        row.innerHTML = `
          <input type="text" placeholder="√úr√ºn adƒ±" value="${it.name}">
          <input type="text" placeholder="Fiyat (√∂r: 150,00)" value="${formatTL(it.price).replace(CURRENCY,'')}">
          <button class="a-btn danger" data-act="delItem">Sil</button>
        `;
        itemsBox.appendChild(row);
      });
    });

    // Kategori & √ºr√ºn butonlarƒ±
    adminContent.querySelectorAll('[data-act="addItem"]').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const ci = +btn.dataset.ci;
        const box = adminContent.querySelector(`.cat-items[data-ci="${ci}"]`);
        const row = document.createElement('div');
        row.className = 'admin-row';
        row.dataset.ci = ci;
        row.dataset.ii = box.children.length;
        row.innerHTML = `
          <input type="text" placeholder="√úr√ºn adƒ±" value="">
          <input type="text" placeholder="Fiyat (√∂r: 150,00)" value="">
          <button class="a-btn danger" data-act="delItem">Sil</button>
        `;
        box.appendChild(row);
      }, {passive:true});
    });

    adminContent.querySelectorAll('[data-act="delCat"]').forEach(btn=>{
      btn.addEventListener('click',()=>{
        if(confirm('Bu kategoriyi silmek istiyor musunuz?')){
          const ci = +btn.dataset.ci;
          menu.splice(ci,1);
          buildAdminUI(menu);
        }
      }, {passive:true});
    });

    adminContent.querySelectorAll('[data-act="renameCat"]').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const ci = +btn.dataset.ci;
        const nv = prompt('Yeni kategori adƒ±:', menu[ci].title);
        if(nv && nv.trim()){ menu[ci].title = nv.trim(); buildAdminUI(menu); }
      }, {passive:true});
    });

    adminContent.addEventListener('click',(e)=>{
      const t = e.target.closest('[data-act="delItem"]');
      if(t){
        const row = t.closest('.admin-row');
        row.parentElement.removeChild(row);
      }
    });

    // √úst butonlar
    document.getElementById('addCategory').onclick = ()=>{
      const name = prompt('Kategori adƒ±:');
      if(name && name.trim()){
        menu.push({title:name.trim(), items:[]});
        buildAdminUI(menu);
      }
    };
    document.getElementById('exportMenu').onclick = ()=>{
      const data = collectAdminData(menu);
      const blob = new Blob([JSON.stringify(data,null,2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'menu.json'; a.click();
      URL.revokeObjectURL(url);
    };
    document.getElementById('importFile').onchange = (ev)=>{
      const file = ev.target.files[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = ()=>{
        try{
          const imp = JSON.parse(reader.result);
          if(Array.isArray(imp) && imp.length){
            buildAdminUI(imp);
            alert('JSON men√º y√ºklendi. Kaydet‚Äôe basarak uygulayƒ±n.');
          }else alert('Ge√ßersiz JSON formatƒ±.');
        }catch(err){ alert('JSON okunamadƒ±.'); }
      };
      reader.readAsText(file);
    };
    document.getElementById('resetMenu').onclick = ()=>{
      if(confirm('Varsayƒ±lan (sayfadaki) men√ºye d√∂n√ºls√ºn m√º? T√ºm yerel deƒüi≈üiklikler silinir.')){
        localStorage.removeItem(LS_MENU);
        closeAdmin();
        renderDefaultOrStored();
      }
    };

    document.getElementById('saveAdmin').onclick = ()=>{
      const data = collectAdminData(menu);
      if(!data.length){ alert('En az bir kategori ve √ºr√ºn olmalƒ±.'); return; }
      localStorage.setItem(LS_MENU, JSON.stringify(data));
      closeAdmin();
      renderMenuFromData(data);
      alert('Men√º kaydedildi.');
    };
  }

  function collectAdminData(currentMenu){
    // adminContent i√ßindeki form elemanlarƒ±nƒ± okuyarak final data √ºret
    const cats = Array.from(adminContent.querySelectorAll('.admin-cat'));
    const data = [];
    cats.forEach((catBox)=>{
      let title = catBox.querySelector('h4')?.textContent || '';
      // h4 i√ßinde ikon olabilir, ba≈ütaki emoji/ikonlarƒ± temizleyelim:
      title = title.replace(/^(\s*[\uD800-\uDBFF][\uDC00-\uDFFF]|\s*[^a-zA-Zƒü√º≈ü√∂√ßƒ±ƒ∞ƒû√ú≈û√ñ√á0-9]*\s*)*/,'').trim();
      // rename yapƒ±lmƒ±≈ü olabilir; buildAdminUI men√ºden alƒ±yor ‚Äî g√ºvenli olan:
      const idx = Array.from(adminContent.children).indexOf(catBox);
      if(currentMenu[idx]) title = currentMenu[idx].title;

      const items = [];
      catBox.querySelectorAll('.admin-row').forEach(row=>{
        const name = row.querySelector('input[type="text"]:nth-child(1)')?.value?.trim();
        let priceStr = row.querySelector('input[type="text"]:nth-child(2)')?.value?.trim() || '';
        if(!name) return;
        // "150,00" veya "150" kabul edelim
        priceStr = priceStr.replace(/\s/g,'').replace('‚Ç∫','');
        if(priceStr.includes(',')) priceStr = priceStr.replace('.','').replace(',','.');
        const price = parseFloat(priceStr) || 0;
        items.push({name, price});
      });
      if(title && items.length) data.push({title, items});
    });
    return data;
  }

  /* ===== Harita: tƒ±klayƒ±nca y√ºkle ===== */
  function setupLazyMap(){
    const btn = document.getElementById('showMap');
    const holder = document.getElementById('mapHolder');
    if(!btn) return;
    btn.addEventListener('click', function(){
      if(holder.dataset.loaded) return;
      holder.innerHTML = '<iframe title="Buca √áƒ±tƒ±r Pide Konum" style="width:100%;height:320px;border:0;border-radius:12px" loading="lazy" referrerpolicy="no-referrer-when-downgrade" src="https://www.google.com/maps?q=Menderes,%20Erdem%20Cd.%20No:125%20Buca/ƒ∞zmir&output=embed"></iframe>';
      holder.dataset.loaded = '1';
      this.style.display='none';
    }, {passive:true});
  }

  function renderDefaultOrStored(){
    loadMenu(); // stored varsa onu render eder, yoksa statik DOM'u enhance eder
  }

  /* ===== Init ===== */
  window.addEventListener('DOMContentLoaded', ()=>{
    renderDefaultOrStored();
    loadCart();
    setupLazyMap();
  }, {passive:true});
</script>

<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"Restaurant",
  "name":"Buca √áƒ±tƒ±r Pide",
  "address":{"@type":"PostalAddress","streetAddress":"Menderes, Erdem Cd. No:125","addressLocality":"Buca","addressRegion":"ƒ∞zmir","addressCountry":"TR"},
  "telephone":"+90-232-442-4555",
  "servesCuisine":["T√ºrk","Pide","Kebap","Lahmacun"],
  "priceRange":"‚Ç∫‚Ç∫"
}
</script>

<footer style="text-align:center; font-size:0.8em; color:#9aa6bb; padding:10px 0;">
  ¬© 2025 Ferit Tahir Asil tarafƒ±ndan hazƒ±rlanmƒ±≈ütƒ±r
</footer>
</body>
</html>
